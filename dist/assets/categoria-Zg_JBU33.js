import"./modulepreload-polyfill-B5Qt9EMX.js";import"./logout-DMNDklZ6.js";document.addEventListener("DOMContentLoaded",()=>{const i=localStorage.getItem("token"),n=document.getElementById("categoria-lista"),s=document.getElementById("form-categoria"),t=document.getElementById("categoria-criar-msg");async function c(){try{const o=await fetch("https://store-management-system-xemr.onrender.com/api/category/list",{headers:{Authorization:`Bearer ${i}`}});if(!o.ok)throw new Error("Erro ao buscar categorias");const a=await o.json(),e=a.data.categories;if(console.log(a),!Array.isArray(e)||e.length===0){n.innerHTML="<p>Nenhuma categoria encontrada.</p>";return}let r='<table style="width:100%;border-collapse:collapse;margin-top:1rem;">';r+="<tr><th>ID</th><th>Nome</th></tr>",e.forEach(m=>{r+=`<tr><td>${m.id}</td><td>${m.name}</td></tr>`}),r+="</table>",n.innerHTML=r}catch{n.innerHTML='<p style="color:red;">Erro ao buscar categorias.</p>'}}s.addEventListener("submit",async o=>{o.preventDefault(),t.textContent="";const a=s.nome.value.trim();if(!a){t.textContent="O nome é obrigatório.",t.style.color="red";return}try{const e=await fetch("https://store-management-system-xemr.onrender.com/api/category/new",{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({name:a})}),r=await e.json();if(!e.ok){t.textContent=r.message||"Erro ao criar categoria.",t.style.color="red";return}t.textContent=r.message||"Categoria criada com sucesso!",t.style.color="green",s.reset(),await c()}catch{t.textContent="Erro ao criar categoria.",t.style.color="red"}}),c()});
