import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css                  */document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("crud-content");document.querySelectorAll(".crud-actions button").forEach(e=>{e.addEventListener("click",async n=>{const r=e.getAttribute("data-entity"),o=e.getAttribute("data-action");t.innerHTML="",r==="produtos"&&o==="listar"?await a():t.innerHTML=`<p style="text-align:center;">Funcionalidade <b>${o}</b> para <b>${r}</b> em construção.</p>`})});async function a(){const e=localStorage.getItem("token");try{const n=await fetch("https://store-management-system-xemr.onrender.com/api/produtos",{headers:{Authorization:`Bearer ${e}`}});if(!n.ok)throw new Error("Erro ao buscar produtos");const r=await n.json();if(!Array.isArray(r)||r.length===0){t.innerHTML="<p>Nenhum produto encontrado.</p>";return}let o='<h2>Lista de Produtos</h2><table style="width:100%;border-collapse:collapse;margin-top:1rem;">';o+="<tr><th>ID</th><th>Nome</th><th>Preço</th></tr>",r.forEach(s=>{o+=`<tr><td>${s.id}</td><td>${s.nome}</td><td>${s.preco}</td></tr>`}),o+="</table>",t.innerHTML=o}catch{t.innerHTML='<p style="color:red;">Erro ao buscar produtos.</p>'}}});document.getElementById("logout-btn").addEventListener("click",async()=>{const t=localStorage.getItem("token");if(!t){window.location.href="login.html";return}try{const e=await(await fetch("https://store-management-system-xemr.onrender.com/api/auth/logout",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).json();alert(e.message||"Logout realizado!")}catch{alert(data.message||"Erro ao efetuar logout.")}localStorage.removeItem("token"),window.location.href="login.html"});
